<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
<style>
@media all and (max-width:4em) {
	.my-breakpoint .ui-block-a , 
	.my-breakpoint .ui-block-b , 
	.my-breakpoint .ui-block-c ,
	.my-breakpoint .ui-block-d,
	.my-breakpoint .ui-block-e { 
		width: 100%; 
		float:none; 
	}
}
@media all and (max-width:8em) {
	.my-breakpoint2 .ui-block-a , 
	.my-breakpoint2 .ui-block-b , 
	.my-breakpoint2 .ui-block-c ,
	.my-breakpoint2 .ui-block-d,
	.my-breakpoint2 .ui-block-e { 
		width: 100%; 
		float:none; 
	}
}

</style>

<script>
function build_grid(arr)
{
	var row = "";
	
	arr_len = arr.length;
	for (var i=0; i<arr_len; i++)
	{
		arr[i] = "<div id=\"" + i.toString() + "\">" + arr[i]+"</div>";
	}
	
	var num_rows = arr_len / 4;
	
	for (var i=0; i<num_rows; i++) {
		row += "<div class=\"ui-grid-a ui-responsive my-breakpoint\">\n";
			row += "<div class=\"ui-block-b ui-responsive\">\n";
				row += "<div class=\"ui-grid-a ui-responsive my-breakpoint2\">\n";
					row += "<div class=\"ui-block-b ui-responsive\">" + arr[4*i] + "</div>\n";
					row += "<div class=\"ui-block-b ui-responsive\">" + arr[4*i+1] + "</div>\n";
				row += "</div> </div>\n";

			row += "<div class=\"ui-block-b ui-responsive\">\n";
				row += "<div class=\"ui-grid-a ui-responsive my-breakpoint2\">\n";
					row += "<div class=\"ui-block-b ui-responsive\">" + arr[4*i+2] + "</div>\n";
					row += "<div class=\"ui-block-b ui-responsive\">" + arr[4*i+3]+ "</div>\n";
				row += "</div> </div> </div>\n";
		
	}
	
	$(".grid").html(row);
}
</script>
</head>

<body>
<div id="container" style="width:1024px">
<div class="grid">
	<div>Grid should be here.</div>
</div>





<script>

var arr = ["h", "e", "l", "l", "o", "w", "o", "r", "l", "d","h", "e", 
"l", "l", "o", "w", "o", "r", "l", "d","h", "e", "l", "l", "o", "w", 
"o", "r", "l", "d", "<img src=\"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQsb76uIvoNKTE9fu41M757k6UM6spveIYmZS20nB9-V76VRJ7VEdwviDoE\">", 
"<img src=\"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQsb76uIvoNKTE9fu41M757k6UM6spveIYmZS20nB9-V76VRJ7VEdwviDoE\">", 
"h", "e", "l", "l", "o", "w", "o", "r", "l", "d"];


$("div.grid").ready(build_grid(arr));

</script>
</div>
</body>
</html>
